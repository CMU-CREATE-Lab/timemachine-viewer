<!DOCTYPE html>
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
      <title>GigaPan Timelapse Explorer</title>
      <script src="js/jquery/jquery.min.js" type="text/javascript"></script>
      <script src="js/jquery/jquery-ui.custom.min.js" type="text/javascript"></script>
      <script src="js/jquery/plugins/mouse/jquery.mousewheel.js" type="text/javascript"></script>
      <script src="js/jquery/plugins/slider/selectToUISlider.jQuery.js" type="text/javascript"></script>
      <script src="js/jquery/plugins/query/jquery.query-2.1.7.js" type="text/javascript"></script>
      <script src="js/org/gigapan/util.js" type="text/javascript"></script>
      <script src="js/org/gigapan/timelapse/videoset.js" type="text/javascript"></script>
      <script src="js/org/gigapan/timelapse/timelapse.js" type="text/javascript"></script>
      <script src="js/org/gigapan/timelapse/snaplapse.js" type="text/javascript"></script>
      <script src="js/org/gigapan/timelapse/timelapseViewer.js" type="text/javascript"></script>
      <script src="js/org/gigapan/timelapse/snaplapseViewer.js" type="text/javascript"></script>

      <link href="css/timelapse.css" rel="stylesheet" type="text/css"/>
      <link href="css/snaplapse.css" rel="stylesheet" type="text/css"/>
      <link href="css/jquery-ui/smoothness/jquery-ui.custom.css" rel="stylesheet" type="text/css"/>
      <link href="css/ui.slider.extras.css" rel="stylesheet" type="text/css"/>

      <script type="text/javascript">
         var gigapanId = $.query.get('id') || "brassica1-15m-halfsize";
         var willAddConnectionDropParam = $.query.get('drop') == 1 || $.query.get('drop') == "true";
         var timelapseDurationInSeconds = 0.0;
         var timeStepInSecs = 0.04; // 25 frames per second
         var timelapse = null;
         var timelapseCurrentTimeInSeconds = 0.0;
         var snaplapse = null;
         var saveSnaplapseWindow = null;
         var loadSnaplapseWindow = null;
      </script>
   </head>

   <body>
      <div id="timelapse_container" style="width:512px; height:288px; position:relative;">
         <div class="overlay1">
            <div id="joystick" style="margin:0 0 0 4px;width:38px;"><img src="images/joystick.png" alt="zoom_in" /></div>
            <div id="zoom_in" style="margin:2px 0 0 14px;width:19px;"><img src="images/plus.png" alt="zoom_in" /></div>
            <div id="slider-vertical" style="margin:-2px 0 0 22px;"></div>
            <div id="zoom_out" style="margin:0 0 0 14px;width:19px;"><img src="images/minus.png" alt="zoom_in" /></div>
            <div id="home" style="margin:5px 0 0 2px;width:48px;"><img src="images/viewall.png" alt="home" /></div>
         </div>

         <div class="overlay2">
            <div id="up" style="margin: -1px 0 0 19px;width:10px;"><img src="images/joystick_up.png" alt="move up" /></div>
            <div id="down" style="margin:10px 0 0 18px;width:10px;"><img src="images/joystick_down.png" alt="move down" /></div>
            <div id="right" style="margin:-22px 0 0 32px;width:5px;"><img src="images/joystick_right.png" alt="move right" /></div>
            <div id="left" style="margin:-13px 0 0 9px;width:5px;"><img src="images/joystick_left.png" alt="move left" /></div>
         </div>

         <div id="timelapse" style="position: absolute; width:512px; height:288px; background:black; overflow:hidden; border: 2px solid black;"></div>
      </div>

      <div id="time_slider_container" style="width:512px; border: 2px solid black; margin-top:4px">
         <table>
            <tr>
               <td>
                  <div id="play_toggle" class="play_mouseout" title="Play"></div>
               </td>
               <td>
                  <div id="timelineSlider" style="width:339px"></div>
               </td>
               <td>
                  <span id="currentTime">00:00:00</span>/<span id="totalTime">00:00:00</span><br/>
               </td>
            </tr>
         </table>
      </div>

      <div id="misc_controls_container" style="width:512px; border: 2px solid black; border-top:0">
         <table id="misc_controls_container_table" style="width:512px;">
            <tr>
               <td style="padding:10px 20px 20px 20px;">
                  <label for="speed">Playback Speed:</label>
                  <div id="playBackSpeedSlider">
                     <select name="speed" id="speed">
                       <option value="-1">-1x</option>
                        <option value="-.5">-½x</option>
                        <option value="-.25">-¼x</option>
                        <option value=".25">¼x</option>
                        <option value=".5">½x</option>
                        <option value="1" selected="selected">1x</option>
                     </select>
                  </div>
               </td>
               <td class="align-right">
                  <label for="viewer_size">Viewer Size:</label>
                  <select name="viewer_size" id="viewer_size" onchange="changeViewerSize($('#viewer_size').val());">
                     <option value="512" selected="selected">Small</option>
                     <option value="768">Normal</option>
                     <option value="1200">Large</option>
                  </select>
                  <br>
                  <br>
                  Debug: <input id="logVideoStatus" type="checkbox" onclick="timelapse.setStatusLoggingEnabled(this.value)"/><label for="logVideoStatus">Log video status</label>
                  <input id="showNativeVideoControls" type="checkbox" onclick="timelapse.setNativeVideoControlsEnabled(this.value)"/><label for="showNativeVideoControls">Show Native Video Controls</label>
               </td>
            </tr>
         </table>
      </div>

      <button onclick="timelapse.setStatusLoggingEnabled(true)">start log</button>
      <button onclick="timelapse.setStatusLoggingEnabled(false)">stop log</button>

      <table class="no-padding">
         <tr class="valign-top">
            <td>
               <table class="no-padding" style="margin-left:-2px; margin-top:10px; padding: 10px; width:516px; border: 2px solid black;">
                  <tr>
                     <th class="align-center" style="padding-bottom:5px">Snaplapse Composer</th>
                  </tr>
                  <tr>
                     <td class="align-center" style="padding-bottom:5px">
                        <button type="button" id="newSnaplapseButton" onclick="newSnaplapse(null)">New Snaplapse</button>
                        <button type="button" disabled="disabled" id="playStopSnaplapseButton" onclick="playStopSnaplapse()">Play Snaplapse</button>
                        <button type="button" disabled="disabled" id="saveSnaplapseButton" onclick="saveSnaplapse()">Save Snaplapse</button>
                        <button type="button" id="loadSnaplapseButton" onclick="showLoadSnaplapseWindow()">Load Snaplapse</button>
                     </td>
                  </tr>
                  <tr>
                     <td class="align-center">
                        <table style="width:485px; padding-bottom:5px">
                           <tr class="align-center">
                              <td>
                                 <button type="button" disabled="disabled" id="recordKeyframeButton" onclick="recordKeyframe()">Record Keyframe</button>
                              </td>
                              <td>
                                 <button type="button" disabled="disabled" id="deleteKeyframeButton" onclick="deleteSelectedKeyframes()">Delete Keyframe(s)</button>
                              </td>
                           </tr>
                        </table>
                        <div id="snaplapse_keyframe_container" style="width:485px; height:300px; display:block; padding:0; margin:0; overflow:auto; border:solid 1px black; background-color:#eeeeee;">
                           <div id="snaplapse_keyframe_list"></div>
                        </div>
                     </td>
                  </tr>
               </table>
            </td>
           <td>
              <table class="no-padding" style="margin-left:-2px; margin-top:10px; width:278px; padding: 10px; border: 2px solid black; border-left:0">
                 <tr>
                    <th id="snaplapse-annotation-title" class="align-center" style="display:none"></th>
                    <td id="snaplapse-annotation-description" class="align-left" style="display:none"></td>
                 </tr>
              </table>
				   </td>
         </tr>
      </table>
   </body>
</html>
