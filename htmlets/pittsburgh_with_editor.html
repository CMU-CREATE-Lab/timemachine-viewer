<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/smoothness/jquery-ui.css" type="text/css" media="all" />

<style type="text/css">
    .ui-widget { font-size: 13px !important; }
    </style>

<script>
  var unpackVars = function(str) {
    var keyvals = str.split('&');
    var vars = {};

    if (keyvals.length == 1 && keyvals[0] == "") return null;

    for (var i = 0; i < keyvals.length; i++) {
      var keyval = keyvals[i].split('=');
      vars[keyval[0]] = keyval[1];
    }
    return vars;
  };

  var getHashVars = function() {
    return unpackVars(window.location.hash.slice(1));
  };

  window.onload=function(){
    var hashVars = getHashVars();
    var tour = hashVars ? hashVars.tour : "";
    var newLink = document.getElementById('tmeditor').src.split("#")[0] + "#tour=" + tour;
    document.getElementById('tmeditor').src = newLink;
  };

  $(function() {
    $("#tourHelpDialog").dialog({
      resizable: false,
      autoOpen: false,
      width: 640,
      height: 435
    });

    $("#tourHelp").click(function() {
      $( "#tourHelpDialog").dialog( "open" );
    });
  });


</script>

<div id="tourHelpDialog">
  <h3>Create a tour as a sequence of keyframes, with transitions between them</h3>
  <br>
  Add current location and map date as a keyframe with "Add +"
  <br><br>
  To remove a keyframe, select it and use "Del -"
  <br><br>
  Between keyframes, choose between two types of transitions:
  <br><br>
  <ul>
    <li>
      <u>Looped transition:</u>  This loops the map through all years.  Change the number of video loops to change how long the transition takes.
    </li>
    <li>
      <u>Duration-only transition:</u>  This smoothly transitions map date, forward or backwards, between the two keyframes, for the specified duration.  If both keyframes have the same map date, the yearly animation is paused while moving between the keyframe locations.  A duration of 0 is instant, jumping immediately to the next keyframe without transition.
    </li>
  </ul>
  <br>
  "Share" lets you capture your tour in the form of an URL to share, or a snippet to embed your tour into a web page.
  <br><br>
  If you have a share URL or embed snippet you'd like to edit, use "Load".
  <br><br>
</div>


<iframe id="tmeditor" src="http://g7.gigapan.org/pdille/timemachine-editor-v4-pittsburgh/view.html" style="width: 1100px; height: 850px;" frameBorder="0"></iframe>
