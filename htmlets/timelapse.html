<script src="../timelapse/js/jquery/jquery.min.js" type="text/javascript"></script>
<script src="../timelapse/js/jquery/jquery-ui.custom.min.js" type="text/javascript"></script>
<script src="../timelapse/js/jquery/plugins/mouse/jquery.mousewheel.js" type="text/javascript"></script>
<script src="../timelapse/js/jquery/plugins/slider/selectToUISlider.jQuery.js" type="text/javascript"></script>
<script src="../timelapse/js/jquery/plugins/query/jquery.query-2.1.7.js" type="text/javascript"></script>
<script src="../timelapse/js/jquery.mousecapture.js" type="text/javascript"></script>
<script src="../timelapse/js/org/gigapan/util.js" type="text/javascript"></script>
<script src="../timelapse/js/org/gigapan/timelapse/videoset_stats.js" type="text/javascript"></script>
<script src="../timelapse/js/org/gigapan/timelapse/videoset.js" type="text/javascript"></script>
<script src="../timelapse/js/org/gigapan/timelapse/timelapse.js" type="text/javascript"></script>
<script src="../timelapse/js/Math.uuid.js" type="text/javascript"></script>
<script src="../timelapse/js/org/gigapan/timelapse/snaplapse.js" type="text/javascript"></script>
<script src="../timelapse/js/org/gigapan/timelapse/snaplapseViewer.js" type="text/javascript"></script>
<script src="../timelapse/js/org/gigapan/timelapse/timelapseViewer.js" type="text/javascript"></script>

<link href="../timelapse/css/timelapse.css" rel="stylesheet" type="text/css"/>
<link href="../timelapse/css/videoset_stats.css" rel="stylesheet" type="text/css"/>
<link href="../timelapse/css/snaplapse.css" rel="stylesheet" type="text/css"/>
<link href="../timelapse/css/jquery-ui/smoothness/jquery-ui.custom.css" rel="stylesheet" type="text/css"/>
<link href="../timelapse/css/ui.slider.extras.css" rel="stylesheet" type="text/css"/>
<link href="../timelapse/css/player.css" rel="stylesheet" type="text/css"/>

<script type="text/javascript">
   org.gigapan.timelapse.VideosetStats.isEnabled = false;
   function preload(images)
      {
      if (document.images)
         {
         var i = 0;
         var imageArray = new Array();
         imageArray = images.split(',');
         var imageObj = new Image();
         for (i = 0; i <= imageArray.length - 1; i++)
            {
            imageObj.src = images[i];
            }
         }
      }

   $(document).ready(function()
                        {
                        $("li#sizeoptions").hide();
                        $("span#indicator").hide();

                        $("#subbutton").hide();
                        $("#status").hide();

                        $("a#size").click(function()
                                             {
                                             $("li#sizeoptions").fadeIn(100);
                                             });

                        $("li#sizeoptions a").click(function()
                                                       {
                                                       $("li#sizeoptions").hide();
                                                       $("li#sizeoptions a").removeClass('current');
                                                       $(this).addClass('current');
                                                       });

                        $(document).click(function(event)
                                             {
                                             if ($(event.target).closest('a#size').get(0) == null)
                                                {
                                                $('li#sizeoptions').hide();
                                                }
                                             });

                        $("#help").toggle(
                              function ()
                                 {
                                 if ($("#slider-vertical")['slider']("option", "disabled")) return;
                                 $('li#sizeoptions').hide(); //might be already opened
                                 $("#instructions").fadeIn(100);
                                 $(this).addClass('on');
                                 if ($('#mainbutton').attr("class") == "pause")
                                    {
                                    timelapse.pause();
                                    $('#mainbutton').attr("class", "pause_disabled");
                                    }
                                 else
                                    {
                                    $('#mainbutton').attr("class", "play_disabled");
                                    }
                                 $("#timelineSlider")['slider']("option", "disabled", true);
                                 },
                              function ()
                                 {
                                 if ($("#slider-vertical")['slider']("option", "disabled")) return;
                                 $("#instructions").fadeOut(50);
                                 $(this).removeClass('on');
                                 if ($('#mainbutton').attr("class") == "pause_disabled")
                                    {
                                    timelapse.play();
                                    $('#mainbutton').attr("class", "pause");
                                    }
                                 else
                                    {
                                    $('#mainbutton').attr("class", "play");
                                    }
                                 $("#timelineSlider")['slider']("option", "disabled", false);
                                 }
                        );

                        $("a#speedhandle").hover(
                              function ()
                                 {
                                 $("span.currentspeed").delay(400).fadeIn(100);
                                 },
                              function ()
                                 {
                                 $("span.currentspeed").hide();
                                 }
                        );

                        $("a#timehandle").hover(
                              function ()
                                 {
                                 $("span.currenttime").delay(400).fadeIn(100);
                                 },
                              function ()
                                 {
                                 $("span.currenttime").hide();
                                 }
                        );

                        $("#timeline").hover(
                              function ()
                                 {
                                 $("span.skiptime").delay(400).fadeIn(100);
                                 },
                              function ()
                                 {
                                 $("span.skiptime").hide();
                                 }
                        );

                        $("#player").hover(
                              function ()
                                 {
                                 $("a#timehandle").fadeIn(100);
                                 },
                              function ()
                                 {
                                 $("a#timehandle").hide();
                                 }
                        );

                        //preload('help_down.png, help_hover, pause_down.png, pause_hover.png, play_hover.png, size_down.png, size_hover.png, pause_snaplapse_down.png, pause_snaplapse_hover.png, stop_snaplapse_down.png, stop_snaplapse_hover.png, help_down.png, help_hover.png, zoom_handle_down.png, zoom_handle_hover.png, zoom_in_down.png, zoom_in_hover.png, zoom_out_down.png, zoom_out_hover.png, zoom_viewall_down.png, zoom_viewall_hover.png, handle_down.png, handle_hover.png');
                        });

</script>

<div id="browser_not_supported">
   <div class="warning">We're sorry, but it looks like your browser isn't currently supported by our viewer.
      At this time, only Safari 5.0+ and Chrome 7.0+ are known to be compatible. <br/><br/>

      Until the other browsers catch up, please enjoy a few videos of what GigaPan Timelapse has to offer.
   </div>
</div>

<div id="player">

   <div id="zoom">
      <a href="#" title="Zoom in" id="zoom_in" class="zoomin" onclick="return false;"></a>
      <a href="#" id="zoom_out" title="Zoom out" class="zoomout" onclick="return false;"></a>
      <div id="slider-vertical" title="Click to zoom"></div>
      <a href="#" id="home" title="View all" class="zoomall" onclick="return false;"></a>
   </div>

   <div id="filler">
      <div id="timelineSlider"></div>
   </div>

   <div id="instructions">
      <span class="zoomhelp"><p>Zoom in &amp; out to explore in greater detail. Click or use the scroll wheel.</p></span>
      <span class="zoomallhelp"><p>Click to view the whole gigapan.</p></span>
      <span class="speedhelp"><p>Drag to change playback speed.</p></span>
      <span class="movehelp"><p>Click and drag to explore.</p></span>
   </div>

   <div id="spinnerOverlay"><img id="spinner" src="../timelapse/images/loading.gif" width="32" height="32"></div>
   <div id="timelapse" style="position: absolute; width:512px; height:288px; background:black; overflow:hidden; border: 1px solid black;"></div>

   <div id="controls">

      <a href="#" title="Play" class="play" id="mainbutton"></a>
      <a href="#" title="Stop time warp" class="stop" id="mainbutton"></a>
      <!-- Only shows during snaplapse -->
      <a href="#" class="pausesnap" id="subbutton"></a>
      <div id="status"><span class="action"><strong>Playing:</strong></span><br/>
         <span class="snapname">Snaplapse Clip</span></div>

      <!-- Only shows during snaplapse -->

      <ul id="sidebuttons">
         <li id="sizeoptions">
            <ul>
               <li>Player Size</li>
               <li><a id="small" class="current" href="#" onclick="switchDataset(0); return false;">Small</a></li>
               <li><a id="large" href="#" onclick="switchDataset(1); return false;">Large</a></li>

            </ul>
         </li>
         <li><a href="#" title="Player size" id="size" onclick="return false;">
            <div id="playerSizeText">Small</div>
         </a></li>
         <li><a href="#" title="Instructions" id="help" class="enabled" onclick="return false;">
            <div id="helpText">Help</div>
         </a></li>
      </ul>

      <div id="time"><b><span id="currentTime">00:00:00</span>/<span id="totalTime">00:00:00</span></b></div>

      <!-- Hides during snaplapse -->

      <div id="playBackSpeedSlider">
         <select name="speed" id="speed">
            <option value="-1">Backward, Full Speed</option>
            <option value="-.5">Backward, Half Speed</option>
            <option value=".5">Forward, Half Speed</option>
            <option value="1" selected="selected">Forward, Full Speed</option>
         </select>
      </div>
      <!-- Hides during snaplapse -->

   </div>
</div>
