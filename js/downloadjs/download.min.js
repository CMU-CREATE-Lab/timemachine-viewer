//download.js v4.21, by dandavis; 2008-2018. [MIT] see http://danml.com/download.html for tests/usage; Modified by pdille
(function(q,b){"function"===typeof define&&define.amd?define([],b):"object"===typeof exports?module.exports=b():q.download=b()})(this,function(){return function r(b,h,a){function p(a){var f=a.split(/[:;,]/),c=f[1];a=0<a.indexOf("charset")?3:2;f=("base64"==f[a]?atob:decodeURIComponent)(f.pop());a=f.length;var b=0,e=new Uint8Array(a);for(b;b<a;++b)e[b]=f.charCodeAt(b);return new d([e],{type:c})}function l(a,b){if("download"in c){c.href=a;c.setAttribute("download",k);c.className="download-js-link";c.innerHTML=
"downloading...";c.style.display="none";var f=function(a){a.stopPropagation();c.removeEventListener("click",f)};c.addEventListener("click",f);document.body.appendChild(c);setTimeout(function(){c.click();document.body.removeChild(c);!0===b&&setTimeout(function(){e.URL.revokeObjectURL(c.href)},250)},66);return!0}if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(a)&&(a="data:"+a.replace(/^data:([\w\/\-\+]+)/,"application/octet-stream")),!window.open(a)&&
confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=a),!0;var d=document.createElement("iframe");document.body.appendChild(d);!b&&/^data:/.test(a)&&(a="data:"+a.replace(/^data:([\w\/\-\+]+)/,"application/octet-stream"));d.src=a;setTimeout(function(){document.body.removeChild(d)},333)}var e=window,g=a||"application/octet-stream";a=b;var m="string"===typeof a&&0==a.indexOf("http"),c=document.createElement("a");b=function(a){return String(a)};
var d=e.Blob||e.MozBlob||e.WebKitBlob||b,k=h||"download";d=d.call?d.bind(e):Blob;"true"===String(this)&&(a=[a,g],g=a[0],a=a[1]);if(m&&(c.href=a,-1!==c.href.indexOf(a))){k="download"==k?url.split("/").pop().split("?")[0]:k;var n=new XMLHttpRequest;n.open("GET",a,!0);n.responseType="blob";n.onload=function(a){r(a.target.response,k,g)};setTimeout(function(){n.send()},0);return n}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(a))if(2096103.424<a.length&&d!==b)a=p(a),g=a.type||"application/octet-stream";else return navigator.msSaveBlob?
navigator.msSaveBlob(p(a),k):l(a);else if(/([\x80-\xff])/.test(a)){h=0;m=new Uint8Array(a.length);var t=m.length;for(h;h<t;++h)m[h]=a.charCodeAt(h);a=new d([m],{type:g})}a=a instanceof d?a:new d([a],{type:g});if(navigator.msSaveBlob)return navigator.msSaveBlob(a,k);if(e.URL)l(e.URL.createObjectURL(a),!0);else{if("string"===typeof a||a.constructor===b)try{return l("data:"+g+";base64,"+e.btoa(a))}catch(f){return l("data:"+g+","+encodeURIComponent(a))}b=new FileReader;b.onload=function(a){l(this.result)};
b.readAsDataURL(a)}return!0}});