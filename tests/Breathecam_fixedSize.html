<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>

    <link href="../css/snaplapse.css" rel="stylesheet" type="text/css"/>
    <link href="../css/jquery-ui/smoothness/jquery-ui.custom.css" rel="stylesheet" type="text/css"/>
    <link href="../css/defaultUI.css" rel="stylesheet" type="text/css"/>
    <link href="../css/visualizer.css" rel="stylesheet" type="text/css"/>
    <link href="../css/annotator.css" rel="stylesheet" type="text/css"/>
    <link href="../libs/change-detect/css/change.css" media="screen" rel="stylesheet" type="text/css"/>

    <script src="../js/jquery/jquery.min.js" type="text/javascript"></script>
    <script src="../js/jquery/jquery-ui.custom.min.js" type="text/javascript"></script>
    <script src="../js/jquery/plugins/mouse/jquery.mousewheel.min.js" type="text/javascript"></script>
    <script src="../js/kinetic/kinetic.min.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/util.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/videoset.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/parabolicMotion.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/timelapse.js" type="text/javascript"></script>
    <script src="../js/Math.uuid.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/snaplapse.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/snaplapseViewer.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/mercator.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/visualizer.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/annotator.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/defaultUI.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/urlEncoder.js" type="text/javascript"></script>

    <script src="../js/org/gigapan/postmessage.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/crossdomain_api.js" type="text/javascript"></script>

    <script src="../js/glutils/Glb.js"></script>
    <script src="../js/org/gigapan/timelapse/TileIdx.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/TileView.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/WebglVideoTile.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/WebglTimeMachineLayer.js" type="text/javascript"></script>

    <script src="https://www.google.com/jsapi" type="text/javascript"></script>
    <script src="../libs/change-detect/js/ThumbnailServiceAPI.js" type="text/javascript"></script>
    <script src="../libs/change-detect/js/TimeMachineCanvasLayer.js" type="text/javascript"></script>
    <script src="../libs/change-detect/js/ThumbnailTool.js" type="text/javascript"></script>
    <script src="../libs/change-detect/js/BoxEventHandler.js" type="text/javascript"></script>
    <script src="../libs/change-detect/js/ChangeDetectionTool.js" type="text/javascript"></script>

    <script src="../template_includes.js" type="text/javascript"></script>

    <style>
      #timeMachine {
        position: relative;
        margin-top: 10px;
        margin-left: 10px;
        width: 843px;
        height: 702px;
      }
    </style>

    <script type="text/javascript">
      jQuery.support.cors = true;

      var url = "http://timemachine1.gc.cs.cmu.edu/timemachines/breathecam/timemachines/heinz/2014-05-26.timemachine";
      //var url = "http://timemachine1.gc.cs.cmu.edu/timemachines/breathecam/timemachines/trimont1/2014-05-26.timemachine";
      //var url = "http://timemachine1.gc.cs.cmu.edu/timemachines/breathecam/timemachines/walnuttowers1/2014-05-26.timemachine";
      var timelapse;

      function init() {
        myHomeView = {
          x: 3671.3243277564334,
          y: 1090.4362740684426,
          scale: 0.4179828167092877
        };
        var settings = {
          url: url,
          showFullScreenBtn: false,
          enableEditor: false,
          enablePresentationSlider: true,
          mediaType: ".mp4",
          enablePostMessageAPI: true,
          ignoreWebGLSupport: true,
          onTimeMachinePlayerReady: function(viewerDivId, timelapseObj) {
            // Add here
          },
          disableTourLooping: true,
          startEditorFromPresentationMode: true,
          newHomeView: myHomeView,
          showEditorOnLoad: true,
          datasetType: "breathecam"
        };
        timelapse = new org.gigapan.timelapse.Timelapse("timeMachine", settings);
      }

      $(init);
    </script>
  </head>
  <body>
    <div id="timeMachine"></div>
    <div style="position: relative; margin-left: 10px; margin-top: 10px;">
      <button onclick="timelapse.loadTimelapse('http://timemachine1.gc.cs.cmu.edu/timemachines/breathecam/timemachines/heinz/2014-05-24.timemachine', {x: 2538.066354606878, y: 1237.0611827608043, scale: 0.6457}, 50)">Change date to 05/24/2014, time to 10:07 AM, view to PNC Park</button>
      <button onclick="timelapse.loadTimelapse('http://timemachine1.gc.cs.cmu.edu/timemachines/breathecam/timemachines/heinz/2014-05-26.timemachine', null, null, true)">Change date to 05/26/2014, preserve time and view</button>
      <button onclick="timelapse.loadTimelapse('http://timemachine1.gc.cs.cmu.edu/timemachines/breathecam/timemachines/heinz/2014-05-28.timemachine')">Change date to 05/28/2014, reset time and view</button>
    </div>
  </body>
</html>