<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>

    <link href="../css/snaplapse.css" rel="stylesheet" type="text/css"/>
    <link href="../css/jquery-ui/smoothness/jquery-ui.custom.css" rel="stylesheet" type="text/css"/>
    <link href="../css/defaultUI.css" rel="stylesheet" type="text/css"/>
    <link href="../css/contextMap.css" rel="stylesheet" type="text/css"/>
    <link href="../css/scaleBar.css" rel="stylesheet" type="text/css"/>
    <link href="../css/visualizer.css" rel="stylesheet" type="text/css"/>
    <link href="../css/annotator.css" rel="stylesheet" type="text/css"/>
    <link href="../css/customUI.css" rel="stylesheet" type="text/css"/>
    <link href="../libs/change-detect/css/change.css" media="screen" rel="stylesheet" type="text/css"/>
    <link href="../css/leaflet/leaflet.css" rel="stylesheet" type="text/css"/>

    <script src="../js/jquery/jquery.min.js" type="text/javascript"></script>
    <script src="../js/jquery/jquery-ui.custom.min.js" type="text/javascript"></script>
    <script src="../js/jquery/plugins/mouse/jquery.mousewheel.min.js" type="text/javascript"></script>
    <script src="../js/jquery/plugins/knob/jquery.knob.js" type="text/javascript"></script>
    <script src="../js/kinetic/kinetic.min.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/util.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/videoset.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/parabolicMotion.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/timelapse.js" type="text/javascript"></script>
    <script src="../js/Math.uuid.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/snaplapse.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/snaplapseViewer.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/mercator.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/scaleBar.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/contextMap.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/visualizer.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/annotator.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/customUI.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/defaultUI.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/urlEncoder.js" type="text/javascript"></script>
    <script src="../js/leaflet/leaflet.min.js" type="text/javascript" ></script>

    <script src="../js/org/gigapan/postmessage.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/crossdomain_api.js" type="text/javascript"></script>

    <script src="../js/glutils/Glb.js"></script>
    <script src="../js/org/gigapan/timelapse/TileIdx.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/TileView.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/WebglVideoTile.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/WebglTimeMachineLayer.js" type="text/javascript"></script>

    <script src="../libs/change-detect/js/ThumbnailServiceAPI.js" type="text/javascript"></script>
    <script src="../libs/change-detect/js/TimeMachineCanvasLayer.js" type="text/javascript"></script>
    <script src="../libs/change-detect/js/ThumbnailTool.js" type="text/javascript"></script>
    <script src="../libs/change-detect/js/BoxEventHandler.js" type="text/javascript"></script>
    <script src="../libs/change-detect/js/ChangeDetectionTool.js" type="text/javascript"></script>

    <script src="../template_includes.js" type="text/javascript"></script>
    <script src="" type="text/javascript"></script>

    <style>
      #timeMachine {
        position: relative;
        margin-top: 10px;
        margin-left: 10px;
        width: 985px;
        height: 752px;
      }
    </style>

    <script type="text/javascript">
      jQuery.support.cors = true;

      // Modis
      var url = "";
      var timelapse;

      function init() {
        myHomeView = {
          x: 42215.53981585008,
          y: 32543.785001045024,
          scale: 0.012558674125514415
        };
        var settings = {
          url: url,
          enableEditor: true,
          enablePresentationSlider: true,
          datasetType: "modis",
          enablePostMessageAPI: true,
          onTimeMachinePlayerReady: function(viewerDivId, timelapseObj) {
            // Add here
          },
          scaleBarOptions: {
            scaleBarDiv: "scaleBar1"
          },
          contextMapOptions: {
            contextMapDiv: "contextMap1"
          },
          showAddressLookup: true,
          disableTourLooping: true,
          newHomeView: myHomeView
        };
        timelapse = new org.gigapan.timelapse.Timelapse("timeMachine", settings);
      }

      $(init);
    </script>
  </head>
  <body>
    <div id="timeMachine"></div>
    <div style="position: relative; margin-left: 10px; margin-top: 10px;">
      <button onclick="console.log(timelapse.getShareView())">Get share view in console</button>
      <button onclick="timelapse.loadSharedDataFromUnsafeURL('#presentation=EKBkD9FHgPpnuikzRThe%20shrinking%20of%20the%20Aral%20Sea%20destroys%20fishing%20industry%20and%20brings%20unemployment%20and%20public%20health%20problems_Aral%20Sea_BkDiF0ykZ2cxViSThe%20Federative%20Republic%20of%20Brazil%2C%20is%20the%20largest%20country%20in%20both%20South%20America%20and%20the%20Latin%20American%20region_Brazil%27s%20Dry%20Season_BkD4MJfnHS-KS2PThe%20Larsen%20Ice%20Shelf%20is%20a%20long%20series%20of%20three%20fringing%20ice%20shelves%20in%20the%20northwest%20part%20of%20the%20Weddell%20Sea_Larsen%20Ice%20Shelf_BkDpN03_mHuCJ2PCalifornia%20is%20a%20state%20located%20on%20the%20West%20Coast%20of%20the%20United%20States%20and%20is%20the%20most%20populous%20U%2ES%2E%20state_California_BkD0F1IInX6apnFAsia%20is%20the%20world%27s%20largest%20and%20most%20populous%20continent%2C%20located%20primarily%20in%20the%20eastern%20and%20northern%20hemispheres_Asia_BkDnKjdqU7GaxqNQueensland%20is%20the%20second-largest%20and%20third-most%20populous%20state%20in%20Australia_Queensland_BkDhEvK3uI9mfvKNorthern%20Europe%20is%20the%20northern%20part%20or%20region%20of%20the%20European%20continent_North%20Europe_BkDqLWCdf5RWrgTThe%20Tonl%C3%A9%20Sap%2C%20%22Large%20Fresh%20Water%20River%22%2C%20is%20a%20combined%20lake%20and%20river%20system%20of%20major%20importance%20to%20Cambodia_Tonl%C3%A9%20Sap%20Lake_BkD8E9xXvwioY7MThe%20Republic%20of%20Iceland%20is%20a%20Nordic%20island%20country%20marking%20the%20juncture%20between%20the%20North%20Atlantic%20and%20the%20Arctic%20Ocean_Iceland_BA4GJ6icEN4e4EAfrica%20is%20the%20world%27s%20second-largest%20and%20second-most-populous%20continent_Africa_Untitled_B')">Load a presentation</button>
      <button onclick="timelapse.loadSharedDataFromUnsafeURL('#tour=EDBoGAU6xplJiliH__BoG0FcnOpVGpkvSAral%20Sea_Aral%20Sea_BAnTZIRpUEfk7U__Aral%20Sea_B')">Load a tour</button>
      <button onclick="timelapse.loadSharedDataFromUnsafeURL('#tour=EDBoGAH_iNmVXRnE__BoGxCQRmH47PSxRLarsen%20Ice%20Shelf_Larsen%20Ice%20Shelf_BAqLQRmH47PSxR__Larsen%20Ice%20Shelf_B', true)">Load and play a tour</button>
    </div>
  </body>
</html>