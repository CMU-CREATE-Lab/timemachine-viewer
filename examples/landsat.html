<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>

    <link href="../css/snaplapse.css" rel="stylesheet" type="text/css"/>
    <link href="../css/jquery-ui/smoothness/jquery-ui.custom.css" rel="stylesheet" type="text/css"/>
    <link href="../css/defaultUI.css" rel="stylesheet" type="text/css"/>
    <link href="../css/contextMap.css" rel="stylesheet" type="text/css"/>
    <link href="../css/scaleBar.css" rel="stylesheet" type="text/css"/>
    <link href="../css/customUI.css" rel="stylesheet" type="text/css"/>
    <link href="../css/leaflet/leaflet.css" rel="stylesheet" type="text/css"/>

    <script src="../js/jquery/jquery.min.js" type="text/javascript"></script>
    <script src="../js/jquery/jquery-ui.custom.min.js" type="text/javascript"></script>
    <script src="../js/jquery/plugins/mouse/jquery.mousewheel.min.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/util.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/videoset.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/parabolicMotion.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/timelapse.js" type="text/javascript"></script>
    <script src="../js/Math.uuid.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/snaplapse.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/snaplapseViewer.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/mercator.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/scaleBar.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/contextMap.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/customUI.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/defaultUI.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/urlEncoder.js" type="text/javascript"></script>
    <script src="../js/leaflet/leaflet.min.js" type="text/javascript" ></script>

    <script src="../js/org/gigapan/postmessage.js" type="text/javascript"></script>
    <script src="../js/org/gigapan/timelapse/crossdomain_api.js" type="text/javascript"></script>

    <script src="../libs/change-detect/js/ThumbnailServiceAPI.js" type="text/javascript"></script>
    <script src="../libs/change-detect/js/TimeMachineCanvasLayer.js" type="text/javascript"></script>
    <script src="../libs/change-detect/js/ThumbnailTool.js" type="text/javascript"></script>
    <script src="../libs/change-detect/js/BoxEventHandler.js" type="text/javascript"></script>
    <script src="../libs/change-detect/js/ChangeDetectionTool.js" type="text/javascript"></script>

    <script src="../template_includes.js" type="text/javascript"></script>
    <script src="http://earthengine.google.org/timelapse/data/20130507/ajax_includes.js" type="text/javascript"></script>

    <style>
      #timeMachine {
        position: absolute;
        width: 100%;
        height: 100%;
      }
    </style>

    <script type="text/javascript">
      jQuery.support.cors = true;

      // Landsat ("https" will casue the thumbnail loading from the server to fail)
      var url = "http://earthengine.google.org/timelapse/data/20130507/"

      function init() {
        myHomeView = {
          x: 677982.255550633,
          y: 521801.7016044302,
          scale: 0.0005840897249061237
        };
        var settings = {
          url: url,
          showThumbnailTool: true,
          showShareBtn: true,
          enablePresentationSlider: true,
          datasetType: "landsat",
          playOnLoad: true,
          onTimeMachinePlayerReady: function(viewerDivId) {
            setupPostMessageHandlers();
            timelapse.getSnaplapseForPresentationSlider().getSnaplapseViewer().addEventListener("slide-changed", function(slideTitle) {
              post("from-timemachine-slide-changed", slideTitle);
            });
            //timelapse.loadSharedDataFromUnsafeURL("#tour=EEDkDAVnCdAw_SiI__DkDAFtUaZ_eRrM__DkDAq6saZGdRlQ__BkDACrDZB9QQxS__Untitled_B", true);
          },
          scaleBarOptions: {
            scaleBarDiv: "scaleBar1"
          },
          contextMapOptions: {
            contextMapDiv: "contextMap1"
          },
          newHomeView: myHomeView,
          showHomeBtn: false,
          showAddressLookup: true
        };
        timelapse = new org.gigapan.timelapse.Timelapse("timeMachine", settings);
      }

      $(init);
    </script>
  </head>
  <body>
    <div id="timeMachine"></div>
  </body>
</html>